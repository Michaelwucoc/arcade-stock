# 使用示例

## 配置示例

```yaml
plugins:
  stock-manager:
    # 白名单群组（为空则所有群可用）
    whitelistGroups:
      - "123456789"  # 群号1
      - "987654321"  # 群号2
    
    # 物品配置
    items:
      - name: 纯净水
        aliases: [water, 水, 纯净水, w]
      - name: 可乐
        aliases: [cola, 可乐, coke, 百事]
      - name: 雪碧
        aliases: [sprite, 雪碧]
    
    # 查询消息模板（支持占位符 {name}）
    queryMessages:
      - '{name}有多少'
      - '{name}几'
      - '{name}j'
      - '{name}还剩多少'
      - '{name}库存'
    
    # 默认查询回复模板
    defaultQueryMessage: |
      {name}当前库存：{count}瓶
      累计添加：{totalAdded}瓶
      累计消耗：{totalConsumed}瓶
      
      最近操作：
      {recentRecords}
```

## 操作示例

### 增加库存
```
用户: water+5
机器人: 纯净水 +5，当前库存：5瓶

用户: 水+10
机器人: 纯净水 +10，当前库存：15瓶
```

### 减少库存
```
用户: water-2
机器人: 纯净水 -2，当前库存：13瓶

用户: 水-3
机器人: 纯净水 -3，当前库存：10瓶
```

### 设置库存（自动计算差值）
```
用户: water=20
机器人: 纯净水 +10，当前库存：20瓶

用户: water=15
机器人: 纯净水 -5，当前库存：15瓶
```

### 不计入排行榜的操作
```
用户: water-1-r
机器人: 纯净水 -1，当前库存：14瓶
（此操作不会计入消耗排行榜和累计统计）

用户: water+5-r
机器人: 纯净水 +5，当前库存：19瓶
（此操作不会计入添加排行榜和累计统计）
```

## 查询示例

### 基本查询
```
用户: water有多少
机器人: 纯净水当前库存：19瓶
累计添加：15瓶
累计消耗：6瓶

最近操作：
张三 +5
李四 -2
王五 +10
赵六 -3
```

### 其他查询格式
```
用户: waterj
机器人: [同上]

用户: 水几
机器人: [同上]

用户: 水还剩多少
机器人: [同上]
```

## 排行榜示例

### 消耗排行榜
```
用户: water消耗排行榜
机器人: 纯净水消耗排行榜：
1. 李四: 5瓶
2. 赵六: 3瓶
3. 王五: 2瓶
```

### 累计排行榜（添加排行榜）
```
用户: water累计排行榜
机器人: 纯净水累计排行榜：
1. 王五: 10瓶
2. 张三: 5瓶
```

## 管理指令（隐藏）

这些指令不会出现在 help 中：

```
用户: stock.set water 50
机器人: 已将纯净水库存设置为50瓶

用户: stock.list
机器人: 纯净水（别名：water、水、纯净水、w）当前库存：50瓶
可乐（别名：cola、可乐、coke、百事）当前库存：0瓶
雪碧（别名：sprite、雪碧）当前库存：0瓶
```

## 注意事项

1. 所有操作都支持任意别名，只要在配置中定义了即可
2. 操作格式无需空格：`water+1`、`water-1`、`water=10`
3. `-r` 参数可以放在任意位置：`water-1-r`、`water-r-1`、`water-r-1-r` 都可以
4. 查询消息模板支持自定义，可以使用 `{name}` 占位符
5. 库存数据存储在内存中，重启后会重置
6. 只保留最近100条操作记录用于显示

